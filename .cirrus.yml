task:
  matrix:
    - container:
        image: node:latest
      name: NodeLatest
    - container:
        image: node:carbon-jessie
      name: NodeCarbon
    - container:
        image: node:dubnium-jessie
      name: NodeDubnium
  auto_cancellation: false
  node_modules_cache:
    folder: node_modules
    fingerprint_script:
      - cat package.json
      - cat package-lock.json
      - echo $OS
    populate_script: npm i
  disable_analytics_script: gatsby telemetry --disable
  test_script: npm test
